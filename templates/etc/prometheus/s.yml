#Conuration documentation: https://prometheus.io/docs/operating/configuration
 
global:
  scrape_interval:      30s
  scrape_timeout:       10s 
  evaluation_interval:  3m
  # sample_limit:       10000

  # Labels when communicating with  external systems (federation, remote storage, Alertmanager).
  external_labels:
      server_ip: '10.0.0.237'
      hostname : 'qft'

rule_files:
   - "rules/memory.yml"
    #- "/etc/prometheus/alerts/first_alert.yml"
 
scrape_configs:


#  - job_name: 'pgbounce'
#    honor_labels: true
#    static_configs:
#        - targets: ['localhost:9911'] 

  - job_name: postgres
    honor_labels: true
    static_configs:
        - targets: ['qft:9187'] 
          labels:
             server : 'qft:5432'
             server_ip: '10.0.0.237'
             hostname : 'qft'
    metric_relabel_configs:
     #  - source_labels: [__name__]
     #    regex: 'pg_settings_[^nps].*'
     #    action: drop
     #  - source_labels: [__name__]
     #    regex: 'pg_settings_.*t?'
     #    action: drop

        - source_labels: [__name__]
          regex: 'pg_settings_s[ysqtu].*'
          action: drop
        - source_labels: [datname]
          regex: '^template[012]'
          action: drop



  - job_name: node
    scrape_interval:  10s
    static_configs:
      - targets: ['localhost:9100']
        labels:
             server_ip: '10.0.0.237'
             hostname : 'qft'


#remote_write:
#       - url: http://localhost:9201/write
